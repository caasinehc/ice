<!DOCTYPE html>
<html>
	<head>
		<title>ice.js</title>
		<style>
			body {
				font-family: "Verdana";
			}
		</style>
	</head>
	<body>
		<h1>ice.js</h1>
		<p>A Multi-purpose Javascript library written by and for me, Isaac.</p>
		<p>Here's a convenient tool to help you use ice.js!</p>
		
		<form id="importTool">
			<fieldset onclick="updateModules();">
				
				<legend>Modules to include: </legend>
				
				<label>
					<input type="radio" name="importAll" value="all" onclick="setSpecify(false);" id="importAll" checked />
					All modules<br />
				</label>
				<label>
					<input type="radio" name="importAll" value="specify" onclick="setSpecify(true);" />
					Specify:
				</label>
		
				<ul style="list-style: none; margin: 0px;">
					<li>
						<label>
							<input type="checkbox" id="allCB" onclick="toggleEverything();" disabled />
							Select all
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" id="mathCB" disabled />
							Math
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" id="physicsCB" disabled />
							Physics
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" id="colorsCB" disabled />
							Colors
						</label>
					</li>
					<li>
						<label>
							<input type="checkbox" id="debugCB" disabled />
							Debug
						</label>
					</li>
				</ul>
			</fieldset>
		</form>
		
		<label>
			HTML embed:<br />
			<textarea id="embedInput" rows="10" cols="80"></textarea>
		</label><br />
		
		<a id="bookmarklet">Import ice.js</a><br />
		
		<label>
			Javascript import:<br />
			<textarea id="jsInput" rows="10" cols="80"></textarea>
		</label><br />

		<script>
			var modules = {
				math: document.getElementById("mathCB"),
				physics: document.getElementById("physicsCB"),
				colors: document.getElementById("colorsCB"),
				debug: document.getElementById("debugCB")
			}
			var allCB = document.getElementById("allCB");
			var importAll = document.getElementById("importAll");
			var embedInput = document.getElementById("embedInput");
			var bookmarklet = document.getElementById("bookmarklet");
			var jsInput = document.getElementById("jsInput");
			
			function toggleEverything() {
				for(var module in modules) {
					modules[module].checked = allCB.checked;
				}
			}
			function updateModules() {
				var allChecked = true;
				for(var module in modules) {
					if(!modules[module].checked) {
						allChecked = false;
						break;
					}
				}
				allCB.checked = allChecked;
				updateOutput();
			}
			function setSpecify(enabled) {
				allCB.disabled = !enabled;
				for(var module in modules) {
					modules[module].disabled = !enabled;
				}
			}
			function updateOutput() {
				var toInclude = [];
				if(importAll.checked) {
					toInclude.push("src/ice.js");
				}
				else {
					for(var module in modules) {
						if(modules[module].checked) {
							toInclude.push("src/ice." + module + ".js");
						}
					}
				}
				updateEmbed(toInclude);
				updateBookmarklet(toInclude);
				updateJsInclude(toInclude);
			}
			function updateEmbed(toInclude) {
				var text = "";
				for(var module of toInclude) {
					text += "<script src=\"https://caasinehc.github.io/ice/" + module + "\"><\/script>\n";
				}
				embedInput.innerText = text;
			}
			embedInput.onclick = function() {
				embedInput.select();
			}
			function updateBookmarklet(toInclude) {
				var text = (
					"javascript: " +
					"(function() {" +
						"var modules = [\"" + toInclude.join("\", \"") + "\"];" +
						"for(var module in modules) {" +
							"var script = document.createElement(\"script\");" +
							"script.src = \"https://caasinehc.github.io/ice/\" + module + \"\\\"\";" +
							"document.head.appendChild(script);" +
						"}" +
					"})();"
				);
				bookmarklet.href = text;
			}
			function updateJsInclude(toInclude) {
				var text = (
					"(function() {\n" +
					"	var modules = [\"" + toInclude.join("\", \"") + "\"];\n" +
					"	for(var module in modules) {\n" +
					"		var script = document.createElement(\"script\");\n" +
					"		script.src = \"https://caasinehc.github.io/ice/\" + module + \"\\\"\";\n" +
					"		document.head.appendChild(script);\n" +
					"	}\n" +
					"})();"
				);
				jsInput.innerText = text;
			}
			jsInput.onclick = function() {
				jsInput.select();
			}
			
			updateOutput();
		</script>
	
	</body>
</html>
